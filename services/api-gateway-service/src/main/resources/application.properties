spring.application.name=api-gateway-service
server.port=${SERVER_PORT:8085}

# API Gateway Routes Configuration
# User Service Routes
spring.cloud.gateway.routes[0].id=user-service
spring.cloud.gateway.routes[0].uri=${USER_SERVICE_URI:http://user-service:8080}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/users/**
spring.cloud.gateway.routes[0].filters[0]=RewritePath=/api/users/(?<segment>.*),/users/$\{segment}

# Patient Service Routes
spring.cloud.gateway.routes[1].id=patient-service
spring.cloud.gateway.routes[1].uri=${PATIENT_SERVICE_URI:http://patient-service:8081}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/patients/**
spring.cloud.gateway.routes[1].filters[0]=RewritePath=/api/patients/(?<segment>.*),/patients/$\{segment}

# EHR Service Routes
spring.cloud.gateway.routes[2].id=ehr-service
spring.cloud.gateway.routes[2].uri=${EHR_SERVICE_URI:http://ehr-service:8083}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/ehr/**
spring.cloud.gateway.routes[2].filters[0]=RewritePath=/api/ehr/(?<segment>.*),/ehr/$\{segment}

# # Doctor Service Routes
# spring.cloud.gateway.routes[3].id=doctor-service
# spring.cloud.gateway.routes[3].uri=http://localhost:8082
# spring.cloud.gateway.routes[3].predicates[0]=Path=/api/doctors/**
# spring.cloud.gateway.routes[3].filters[0]=RewritePath=/api/doctors/(?<segment>.*),/$\{segment}

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedOriginPatterns=*
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations[/**].allowCredentials=true

